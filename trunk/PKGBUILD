# $Id$
# Maintainer: Felix Yan <felixonmars@archlinux.org>
# Maintainer: Antonio Rojas <arojas@archlinux.org>
# Contributor: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Pierre Schmitz <pierre@archlinux.de>

pkgbase=kde-l10n
pkgver=17.04.0
pkgrel=1
arch=(any)
url='https://www.kde.org/'
license=(GPL)
makedepends=(kdelibs cmake automoc4)
options=(docs)

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'bg     "Bulgarian"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'ca@valencia     "Catalan (Valencian)"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en_GB  "British English"'
  'eo     "Esperanto"'
  'es     "Spanish"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Farsi"'
  'fi     "Finnish"'
  'fr     "French"'
  'ga     "Irish"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hi     "Hindi"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'ia     "Interlingua"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mr     "Marathi"'
  'nb     "Norwegian Bokmal"'
  'nds    "Low Saxon"'
  'nl     "Dutch"'
  'nn     "Norwegian Nynorsk"'
  'pa     "Panjabi/Punjabi"'
  'pl     "Polish"'
  'pt     "Portuguese"'
  'pt_BR  "Brazilian Portuguese"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sr     "Serbian"'
  'sv     "Swedish"'
  'tr     "Turkish"'
  'ug     "Uyghur"'
  'uk     "Ukrainian"'
  'wa     "Walloon"'
  'zh_CN  "Chinese Simplified"'
  'zh_TW  "Chinese Traditional"'
)

pkgname=()
source=()

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=kde-l10n-${_locale,,}
  
  pkgname+=($_pkgname)
  source+=("https://download.kde.org/stable/applications/$pkgver/src/$pkgbase/$pkgbase-$_locale-$pkgver.tar.xz")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

sha256sums=('46b619c2b2e32decd93cd0b5f0308fdb4d576d0c0c2cbdd496bcdfab443544fa'
            'e0f1388662cb2373d3d5b35d86884158bd3715b68edb322febdb4562486babdf'
            '613ebc3b40f9a0ad56193548a54e1a1e77086f7f781ffdfdf50fe4acc5711789'
            '34f5a60c93da6a0dbbdd38f031b2e4d30889f27b9261a88bfbf757a7681472cc'
            'c93d8a0790d755dc9d4c53958db3f066c50a3cb144c26bd0dfe266754c5a83ff'
            '6d0cd138761f1578ab06618b1577f3d29afc87873973c24e9ae06f6bc9cf6638'
            '1a3af701ac4f370552033b45871d083730b700275a1896d52075fcbb79074888'
            '1783cead48438b1abad8e10216bf173a7b66dcbe569b85fcf97e697f79fc2c16'
            '6d71613767a738b782fb809998855975deccba27d87cb514aed2d2f48b3ad1a1'
            '23404c037eeca8732fd0f20dc0a90750784efd2083816dbc114188acae99d812'
            '2871a88da111d4b70ee411d2335d47ebd050abf79b1bffff944f8bcd37e31d28'
            '22e59e03f9990ad3aadcd13e50f9ecf0a76610ac21d8d9d424cda300392e6e31'
            '1326a7840d96128a61a0dd96d5c4c5a4f11eaba6a74ac2191780832254ac52f6'
            'ba28c72f6335b127dee45a1332abe9cec724488273ee1d3cd819c834de6f7ec7'
            '254d925bb18f1c3cfc14a3cf4733d3218098ed47da9bf6301077fb0f9f46725e'
            '9168fc8d666956a111cb209ea5034c0bd9158b4e6e14de81b121199a4d8595ea'
            '6d5cd44cacf11d41321a7f6c997807116d4aed809b3112e2b110928d639c07fb'
            'c2aaf7f5fa1e1ffd94a32e72014e4a7cc8d0c1976031984cfb1815e78f33516c'
            'ab48b2405ef49e01dc6bab5acb0ee9262123de78cd05e6cc7c2ec834710b3e61'
            '9e0121f98badbb15055e2a292cb15873e09c99570f08970f38b6da3677221785'
            'ada6eb5db30d8f42be1d12813e53d682f3bbaa646ee0e53aed4d633e3963412d'
            '77418c61f01ad16267728d1701ced9b3e98d2ef35d226a3ab890beb48e61c73f'
            '27f308c10283b3067db1b92654ca648c8d89e05e1c99dc5b20229e42fdbd7718'
            '627dd98bf0aeeba1d4232006d32c35b1a1ab65ba363b50ccce6a1738dbea26ac'
            '5e7f2bba6eb8febd713cf98c49f36cc1a778f9a2a7890aa451ee15a69898bf3e'
            '4cfbba8d516751264a88776e3f4b39942aea28dadf25728505c09083dd55bab1'
            'eb739f49b332bd0ff763187813a7815b377fd41a479e4ccd81de3638b94f3a3d'
            '0dcd76eb85069512e937c456351503e4dc1666790662c5c0111fba4ff72b1842'
            '1c39cdf1367b5d3ead25fc222e02ce1dd0509aeee5ddeea02e38a1daf4573f91'
            'c93e0990bb6a348c17d323329dfc96184775fe943fe0d0d2127d0028e47498d8'
            '7e473ad851508409813c8076a4122186a1b9558f4ff15332dd3fee3c73a9a0ad'
            '49239f25825abb1633e95ee28e9e0a20df220c10ce24c8b42401818aac624082'
            '8940c07c9d0189d3c2a640d92a45c4eccabfb10353108132fcac19f38e00fc50'
            '50745537b8d50df3b321e4022c32619b7954af1b10dc768de7b6f4132f3f747a'
            '6df281bd98d17071216430e25fe4b6545c7be7d4a393eeeae1632a420e9e8d4c'
            '26291bec3fb1196da4c809914b5c4f19efb8de70864de1e64eef32119ad61dbb'
            '94e2ed229ae08f549b5cd98c7ab7b18740c27eea4b5e9796fd311f3536f23f77'
            '6a6a6632f5fe65d964c5575a1393d3013b42822465f262d56da33e55fc8bd384'
            'a7a488f62ba842775b6220ce133f543aebbf729b8cafb35f343a34ffc0a832c4'
            'bb20afe6d632eb53b227f7a7900a67770e849c5f3242d4640983d3c7cd3fc396'
            '42932d997b8feee73389f7683d669caa30fa5f300a80433f192b962d92a58a59'
            'd624ca3d316690a71677dbe518b37bf7cceb69a5d0fc91f86d119493b6fb46c1'
            '0ac1881da77b651ff5af7dc9030242695ac5109ae9b4ac801e9fee7813552658'
            'aef657257ef117951b4379c601c9d894d352c705b48e8db0b6c6366e67df7a3c'
            'e1ea0ef8bc39b2a5516497856f2b4ecab662a7dbfac49007476446a6fafe1738'
            'e1170f267ca01937e3d32fa38532d2dc6d6856d463afe480262a12cce0e87e74'
            '3457e95fcd309e3e20f2716a74b25d427d2cdea73adb5a9e81061b06c219b23d'
            '03afac02c8968c45ca09f38b6728f535b72d34ee4f8d2199d2560dcf692222ea'
            'c45e96cb680f50017fff2f22cc6980c83016120aa0dc655102701f67ae5407fe'
            'c2fba4c7d6e26e4106ea4b3abe6871110eadd0f842a5d91210f77c351d2f1a71'
            '938bd6bca9ad5299563d92a186d10d892ab04b8e8e8f8a6dbbfa3c570be4da01'
            '51f3902eaa4249de63825418a27bff593cc200246660eaaf6dda02ebc519ae7f'
            '103ad905c70d1e47a8dc0011a1bc72345d05055f119be44bc02e8038ebc1845c'
            '9a6523d6c75023105a1bc81892a7fad8cac3e4042d0f3d687c6e347367737328'
            'bd07daa7f454061b66c2667b4dbb89e85a46a92a9552c5f5cc29adb23045ac55')

build() {
  for _lang in "${_languages[@]}"; do
    _locale=${_lang%% *}
    
    mkdir -p build/$_locale
    cd build/$_locale
    cmake $srcdir/$pkgbase-$_locale-$pkgver \
      -DCMAKE_BUILD_TYPE=Release \
      -DCMAKE_INSTALL_PREFIX=/usr
    make
    cd ../..
  done
}

_package() {
  pkgdesc="$2 localization for KDE4 Applications"
  cd build/$1
  make DESTDIR="$pkgdir" install

# Fix conflicts
  rm -fr "$pkgdir"/usr/share/doc/HTML/*/{kdesu,knetattach,kcontrol/kcm_ssl,fundamentals,khelpcenter}
}
