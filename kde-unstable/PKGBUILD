# $Id$
# Maintainer: Felix Yan <felixonmars@archlinux.org>
# Maintainer: Antonio Rojas <arojas@archlinux.org>
# Contributor: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Pierre Schmitz <pierre@archlinux.de>

pkgbase=kde-l10n
pkgver=17.07.80
pkgrel=1
arch=(any)
url='https://www.kde.org/'
license=(GPL)
makedepends=(kdelibs cmake automoc4)
options=(docs)

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'bg     "Bulgarian"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'ca@valencia     "Catalan (Valencian)"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en_GB  "British English"'
  'eo     "Esperanto"'
  'es     "Spanish"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Farsi"'
  'fi     "Finnish"'
  'fr     "French"'
  'ga     "Irish"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hi     "Hindi"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'ia     "Interlingua"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mr     "Marathi"'
  'nb     "Norwegian Bokmal"'
  'nds    "Low Saxon"'
  'nl     "Dutch"'
  'nn     "Norwegian Nynorsk"'
  'pa     "Panjabi/Punjabi"'
  'pl     "Polish"'
  'pt     "Portuguese"'
  'pt_BR  "Brazilian Portuguese"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sr     "Serbian"'
  'sv     "Swedish"'
  'tr     "Turkish"'
  'ug     "Uyghur"'
  'uk     "Ukrainian"'
  'wa     "Walloon"'
  'zh_CN  "Chinese Simplified"'
  'zh_TW  "Chinese Traditional"'
)

pkgname=()
source=()

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=kde-l10n-${_locale,,}
  
  pkgname+=($_pkgname)
  source+=("https://download.kde.org/stable/applications/$pkgver/src/$pkgbase/$pkgbase-$_locale-$pkgver.tar.xz")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

sha256sums=('8e94253bfcdb525cdc17a321bee803cc7bdd3afaeba0a89df46932511dfb46f5'
            '52cb82fb2e48758cae09908a9b6d2b987d4a0e99c131992fdab61e0853871d0f'
            '813ff35b8768840a525a33bc62d007a239b747b93ebd0851cd296fd5e417c921'
            'b6b74d7e2e4b4c01fd17896b7d8336b4136dc28fd1009bfb64bf6059acf942db'
            'd2784b333cb4b56b7fadfe75353b5e0fd50087f0b5a24083b6c8458b15b66cd8'
            'b2eb9bd2ae34d90ab60f3e6083c36e9ae0bc6309f17612a316f6a8aad29c8d89'
            '458e6fb06b01b743a9cd5b0e3476dfd549f433a5c899d1e7b52a3c2cba0e04cb'
            '7e37d0551efb0bd6f3ae230de5086533f0db1bbd3c00870f35c8a30e7aefc6f9'
            '0b48f8627582d9768165940be82d8b011d08e5774ae63b0b328fedd20ebbbaef'
            'b04a875c499db328058fa06896731c1137201e4a761868fe82dd537097f1f87a'
            '389791c8f71cb1e11b4b1631e7307a94ef36702b349a43c9f79d0cfe020926de'
            'bcaf10f15345de3eb428474ab392e57788491146c99beeb72ab1d583b29b89d3'
            '82ad5d26f0c8872c360fd0d0d160ea9b3f66b1048a31ebf09d86a8340bc280dc'
            '0be761b8576dced5ab6eafc5524db47ebeccda2f037361db6042e84b930c97e0'
            '49c79e2dc3061157f003ff81ce53f97f8517c4799fee6c0c68d0aae93e0705b7'
            'd2b2a6c3f172f574c408b24c2fd30762df2adbf66f219552a0fe1406ab87709a'
            '2a41baecfe03a0ca4267a48a8da56699b7f02612f3922fe99a360c847ddcaf75'
            '9c570c7f66322748af4bb5d9f30e610a0879810733ea55c69b51a244ba4d587c'
            '812ff50bd6a4daa1990e6d0117dbd0c32eb9cf96f51f2f5def6ae8178155a091'
            '3af860459f21cde434b6285e1f3742ddd781c01b01335fa8f2c8137e1f84e82c'
            '64510aa6d161d83965dfd2626b70dd2e9f6eaf6a06e1ada5da9167cab02c64a8'
            'd076c103c9e08befdd863b4daaf5fe40fa651ca2967454862fc63ea8f20a602d'
            '0251ed58966546cd32050aef130fb0e85d1e5374234943721ac81505405bbbe3'
            '760f0fc3f4e75fe0957250033e39b035083ad87dadaf22e94f9614b3db5730a9'
            'dcab7b7c53b76fb367da3429c05c673c01fd9633b4de981396bb99300c4e9e53'
            'e35f38e5fbac4cb2f7ac96d65eb4fe88fc364cc6e072b9bfc2a85e87d06bd8f2'
            'dce5bc5cd1817cb457cec5c2d672cd33b351395e6ebc3096db171cce61d9d47f'
            '2173cf1838427eaebfb51fca0528b3be8c2530806bec24b2109fef3556d82e78'
            '290796bfb154afd1b665c3880b55aa26ad6824cba97b0328c17119ed4730a4b0'
            '6e54503c4f122a97e4fc1aa37b727624496510c2a1cfa8bbbb4ad9690758516d'
            '8852c77825ea681e770b1e038bc94716ce6d21a859c64e1fb4be04df6179f85d'
            '491accbafaa2015c352703f63cfdb087b13cdf753e02cd276a49444b5aac1611'
            'a18482660f9c2d60a7d3394a6db799e4b91200160d27de7339ee8a9633953252'
            '07d0b7dd375412fde176b41fece75e8efda205e4cb5cee523d8b0392a1694cc0'
            'c81f04aa87e5eacc5a352c2cea08736d3b38f7ec750e715688684a181d486d33'
            '66b9a4b1ded04a249619985aa90ac8548f0fa6a097f71a19fd18dad84202d22b'
            '8858480fbd12b48185862d99c6c829e21327d37d31f357c005e22202b7375cdd'
            '82edede2a658ecdc7d0b5382c552b0267d0d6e86e142d5d085e5118373533dbc'
            '2d7e47fe9d593b6c401196210961777b9db4cf327fc0b6d7d0b1fcb3fd1bcac8'
            '5d0c29ef62179344e9e59b254de1d36fac59af4d7260d4d2c7e536ceeb67384a'
            '6d65cc696b47b00c752b1b921acf20b69ced871c6cd9c525451a77ac32d46cf5'
            'a28df3cc8d0a27fc7d640e47cd4c25e111ff09148a4783bfa3195ba0a113800f'
            '8a63ef60a5b08a9a5db23527b4a744c587c5c90a83a6a66ade87cb83582c79b7'
            'fac0c38aad35285e9abded0f3a03042328daa6240e8df2a76c65babad1564304'
            '2e27ca5d2e3299400e36a05e642ab3042542bf534ba67740426f0ae12b53d4e9'
            'aecd76f9595c0184c33f3ce5017c26cc3a493cc067fff7a24cbe2dac224f6bdd'
            'cf915f9b5d0ef9de13e65cccea48886e7408412aa143042ec6f74d0f0165c6a9'
            '07276c3a880c1e1823755ef06872621faf83a24514e35b105b1696d4afca53ae'
            '04da71e841fb0e3cd03b5609c796c3664f98d31da96fd6e11b25c46ded68a8ea'
            '46a371cc34a8a9216993e4aee5fc1beb7159083ba298ab29f7a0ae9c954d5e38'
            '15c940e40d3ddd809fd0d1299559783fc31e0d676259c09ab52aeb13f484f346'
            '9a8ae25766fe02003802447a2d942b481c7d98fb2e2ee1a370321ae3a5da5999'
            '3900fc843f37dd4bd2b10c1b9f2e45cb51ed2d40088cb3e1f6dcff3e4e52922f'
            '5769e44d4a177b45623ebe0a1786e6c13410ea6085804e522739eff28b9d5047'
            'f83a7c40cd372ea972497285812728d0e1c7d32f22fc3df4913d0374ca8cc96d')

build() {
  for _lang in "${_languages[@]}"; do
    _locale=${_lang%% *}
    
    mkdir -p build/$_locale
    cd build/$_locale
    cmake $srcdir/$pkgbase-$_locale-$pkgver \
      -DCMAKE_BUILD_TYPE=Release \
      -DCMAKE_INSTALL_PREFIX=/usr
    make
    cd ../..
  done
}

_package() {
  pkgdesc="$2 localization for KDE4 Applications"
  cd build/$1
  make DESTDIR="$pkgdir" install

# Fix conflicts
  rm -fr "$pkgdir"/usr/share/doc/HTML/*/{kdesu,knetattach,kcontrol/kcm_ssl,fundamentals,khelpcenter,onlinehelp}
}
