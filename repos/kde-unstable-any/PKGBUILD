# $Id$
# Maintainer: Felix Yan <felixonmars@archlinux.org>
# Maintainer: Antonio Rojas <arojas@archlinux.org>
# Contributor: Andrea Scarpino <andrea@archlinux.org>
# Contributor: Pierre Schmitz <pierre@archlinux.de>

pkgbase=kde-l10n
pkgver=17.03.90
pkgrel=1
arch=(any)
url='https://www.kde.org/'
license=(GPL)
makedepends=(kdelibs automoc4)
options=(docs)

_languages=(
  'ar     "Arabic"'
  'ast    "Asturian"'
  'bg     "Bulgarian"'
  'bs     "Bosnian"'
  'ca     "Catalan"'
  'ca@valencia     "Catalan (Valencian)"'
  'cs     "Czech"'
  'da     "Danish"'
  'de     "German"'
  'el     "Greek"'
  'en_GB  "British English"'
  'eo     "Esperanto"'
  'es     "Spanish"'
  'et     "Estonian"'
  'eu     "Basque"'
  'fa     "Farsi"'
  'fi     "Finnish"'
  'fr     "French"'
  'ga     "Irish"'
  'gl     "Galician"'
  'he     "Hebrew"'
  'hi     "Hindi"'
  'hr     "Croatian"'
  'hu     "Hungarian"'
  'ia     "Interlingua"'
  'id     "Indonesian"'
  'is     "Icelandic"'
  'it     "Italian"'
  'ja     "Japanese"'
  'kk     "Kazakh"'
  'km     "Khmer"'
  'ko     "Korean"'
  'lt     "Lithuanian"'
  'lv     "Latvian"'
  'mr     "Marathi"'
  'nb     "Norwegian Bokmal"'
  'nds    "Low Saxon"'
  'nl     "Dutch"'
  'nn     "Norwegian Nynorsk"'
  'pa     "Panjabi/Punjabi"'
  'pl     "Polish"'
  'pt     "Portuguese"'
  'pt_BR  "Brazilian Portuguese"'
  'ro     "Romanian"'
  'ru     "Russian"'
  'sk     "Slovak"'
  'sl     "Slovenian"'
  'sr     "Serbian"'
  'sv     "Swedish"'
  'tr     "Turkish"'
  'ug     "Uyghur"'
  'uk     "Ukrainian"'
  'wa     "Walloon"'
  'zh_CN  "Chinese Simplified"'
  'zh_TW  "Chinese Traditional"'
)

pkgname=()
source=()

for _lang in "${_languages[@]}"; do
  _locale=${_lang%% *}
  _pkgname=kde-l10n-${_locale,,}
  
  pkgname+=($_pkgname)
  source+=("https://download.kde.org/unstable/applications/$pkgver/src/$pkgbase/$pkgbase-$_locale-$pkgver.tar.xz")
  eval "package_$_pkgname() {
    _package $_lang
  }"
done

sha256sums=('97a89b2032c62dedd831a1744b889fbda4c4dd35d08d9695f10a732b6ca8cdb7'
            '31ba8ec8804e05c347a80e1e8c787a839afdeefe44d478e723c62d34cf16075d'
            '1eb5e36742f8e62620a8cae0ce0fab50c49f0040a825c7a28c5d01cc3b090446'
            '02398210ded6eb6477b259d63b915ce974aba81a4a3e84e2aa61ccddb6b20ece'
            'd2208d204d0c3bf5291990d6954dac170aef3ba7a6786aeb9ce8bc5963f6fa53'
            'fc3bbd68fd9b05561e3cec92187fcee3c0309d8884aa9378fd01f2815fd72ab5'
            '1f3941942e84f2f175cb84620b3e4c960021e39c973d9812e434eb943640eacb'
            'df9c0f9347a3d579d1052f0f926425568f489afb709fc943a55566715c2441dd'
            'be7ee77aa75a6022bcb79a6e165573c24aa25ba401793f0443d65fdfbb79c6fd'
            'dba6f8c88a8445ae1d2ca1b04b61a6dc54cdec06ad012f0c5c32fdd6ad17f019'
            'd6793279335afc8d266d2b34a7ffd08a2f41139b8dfe184e8a758bc565140827'
            '7f36e9b6a983ab80353716d5045f14b79df32953b733873ada3b9fd1ac224f8a'
            '82e2133a1df42ca0c07717813bcdc5e02d4e45012a4496dd27d31643009ac723'
            '8068e315ccf75e360d998de99fa0d91b895385178d424e1952633083c423b1c9'
            '2b9cb0ae3750079ab455fb93a4c8e363750de54150c23aadb70d53792142e213'
            '7eed63591905bd367ba0e35a32659b9ca82a9dc531cde0799319a4aebee8405e'
            '710d8e66447ad1c9ad00988773706c1e082e75fdb375f1f9763c8f7dd614233e'
            'c9c2f2e596528b808f3b9d92d02368e8dbb6c038367e9269fdcf7d0abc27a4a9'
            '050759b79b150c8add70a370afb52873b12207b404e0791441cb6e3ceb1ad205'
            '96069fd5d43a7d7bfe775f506934f652db4749299b4039f96e44b4889bfb9334'
            '770e6f3223c1e678aeaa8867406b2a9622a1e6ec87e26f54a5e9fb378dfcd028'
            'ccad54ed514dbd1e87c8bce42edf47d86f392b4acbc86cd4397ba498a3020a3e'
            '7dcec7af23cebdfb217225cfc91e9e1168adb7bc2a8cc6f2396429995c51276a'
            '3622d60f0edab6ee2f6fa0dca51ceeb92c0613d2dabdd16806162aaee849216a'
            '6278f7a046d026bbe0ae25805125910256445a43aa9fbabe44bb2766a952e05a'
            'c5ef3b66f1797dd489119ef6fbe9e3fb70f66ea33ed3935d15546da2727358fc'
            '03e34ed6c2eab6bb14e9e0c453fe8e424b49f2af4209f6da4db608ddf67ef0dd'
            '67d99dd9f9d3bf41d9e9c02b897b5fe092dae6767f11de4c7e71800e73091d4f'
            '34d9f6288c303303cec142d1442d7c76247eea4e68b4f7f95068bc6f44298770'
            'e416e0fd35d4476b94696e6a9f2c5654cf82d87b0c8081c794c8257d19f98d87'
            '9087e501f40acf81295a699def53354764e24e904aeb87f1d04befefee5526bb'
            '83d6cb8b79ef3cdfb187c09f5d479330aec4ce1a47f9a0c081c18165f1139954'
            '42f55bb1785928d2a5184da98e3e9227d6e28cd8ad9957a89792682494641093'
            'c418df229a2b93a98042073cfa5addab4fd37684448b9deb8847a77e8b73c5e5'
            '4c64d9550ed9db29769ed6e1d02ceae3f4824f75e302f29d7eb664d38b0f35e8'
            '167eefacf3f991f199246f0bd43660d52dbbd306d58e827b7d4eb3f886d6105e'
            '30746a36865d5ac4bef9402e8e7a6df2f9dbf7a1764998c7334a44971e52e2a0'
            '0a4e5630759a56cf842e0ac4ca36de42ded7ea64d2a16449a615575156c2ce1b'
            'ceae648972856680986b35e435ee2bb761113615f2759a4b092fbbf8fa566629'
            '632ca6c59157f2f254d92fc32afcd6c6bf5d7ef894a5b5533978ed31e92d6c1f'
            '98c41057d1f5e5411e7615b4e2192a3b1951c88ac319fa76a49c5eefe6dfebee'
            'b4475fa4543e373655c58799aa9181ace896667dd349c33589729e0a09defd48'
            '88befc7071dbe511cb4fb1355e1b5fc1a994efa4bdf1df1f43edafc20b38e259'
            '2881a4bd491d10425180baa1a25bf3426bfd87bb74b2a70ccd8ee12615a3b828'
            '30dc6c1899ad6a97a7fb8975ee643363ec00525ee2ede6b0089692cec44ad7a4'
            'c9c97045c1657d255847c0fd66e86485dc982d2f28266717af0e77cba71efd02'
            '464a6067b6ff244a64fc9151ccd77ea61773222ec755384824e692e97a776205'
            '12055009d0586f995bffb6490a2fa24b36ba132d7eb029c725326e4335a2928e'
            '0336d77a401bbdb51d5deace9e4070008be9266cd6de0b7725be43bc63083e34'
            'f98c06e7071d6b82df937937c0244b97e4aa8e30b0dbee7e7f5c9bdc491f60dd'
            'efb997bd63d93c125c7760ea337cec0cf1789ae23801c628cc71fd78fe768365'
            '321642d7e98be49237a4c25fdc2964ea834dba55d9b6e0f6fda80c46338c9e2f'
            '6749894c3e9754be8640d96032b46720f31e377a1c1cfccfaf2302396fd5a818'
            '6e5979338afa0844b2a2f3c5d7ecf3bec6c5b5c2a5cd9f0414a73d5bda3ca1a0'
            '385dded8859ac8b946435f195e7e68239daf0cff8d6d00ede84e2675ce0952f8')

build() {
  for _lang in "${_languages[@]}"; do
    _locale=${_lang%% *}
    
    mkdir -p build/$_locale
    cd build/$_locale
    cmake $srcdir/$pkgbase-$_locale-$pkgver \
      -DCMAKE_BUILD_TYPE=Release \
      -DCMAKE_INSTALL_PREFIX=/usr
    make
    cd ../..
  done
}

_package() {
  pkgdesc="$2 localization for KDE4 Applications"
  cd build/$1
  make DESTDIR="$pkgdir" install

# Fix conflicts
  rm -fr "$pkgdir"/usr/share/doc/HTML/*/{kdesu,knetattach,kcontrol/kcm_ssl}
}
